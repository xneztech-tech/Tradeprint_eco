{% extends "backend/themes/base.html" %}
{% load static %}

{% block content %}

	<div class="ec-content-wrapper" style="margin-left: 240px;">
		<div class="content">
			<div class="breadcrumb-wrapper breadcrumb-contacts">
				<div>
					<h1>User List</h1>
					<p class="breadcrumbs"><span><a href="{% url 'admin_dashboard' %}">Home</a></span>
						<span><i class="mdi mdi-chevron-right"></i></span>User
					</p>
				</div>
				<div>
					<button type="button" class="btn btn-primary" style="cursor: default;">
						TOTAL USERS: {{ users.count }}
					</button>
				</div>
			</div>
			<div class="row">
				<div class="col-12">
					<div class="ec-vendor-list card card-default">
						<div class="card-body">
							<div class="table-responsive">
								<table id="responsive-data-table" class="table">
									<thead>
										<tr>
											<th>Profile</th>
											<th>Name</th>
											<th>Email</th>
											<th>Phone</th>
											<th>Total Buy</th>
											<th>Status</th>
											<th>Joined On</th>
											<th>Action</th>
										</tr>
									</thead>

									<tbody>
										{% for user in users %}
										<tr>
											<td><img class="vendor-thumb"
													src="{% static 'backend/assets/img/user/user.png' %}"
													alt="user profile" /></td>
											<td>{{ user.first_name }} {{ user.last_name }}</td>
											<td>{{ user.email }}</td>
											<td>{{ user.customer_profile.phone|default:"N/A" }}</td>
											<td>{{ user.orders.count|default:"0" }}</td>
											<td>
												{% if user.is_active %}
												<span class="badge badge-success">ACTIVE</span>
												{% else %}
												<span class="badge badge-danger">INACTIVE</span>
												{% endif %}
											</td>
											<td>{{ user.date_joined|date:"M d, Y" }}</td>
											<td>
												<div class="btn-group mb-1">
													<a href="{% url 'user_detail' user.id %}"
														class="btn btn-outline-success">Info</a>
													<button type="button"
														class="btn btn-outline-success dropdown-toggle dropdown-toggle-split"
														data-bs-toggle="dropdown" aria-haspopup="true"
														aria-expanded="false" data-display="static">
														<span class="sr-only">Info</span>
													</button>

													<div class="dropdown-menu">
														<a class="dropdown-item"
															href="{% url 'user_edit' user.id %}">Edit</a>
														<a class="dropdown-item" href="{% url 'user_delete' user.id %}"
															onclick="return confirm('Are you sure you want to delete this user?')">Delete</a>
													</div>
												</div>
											</td>
										</tr>
										{% empty %}
										<tr>
											<td colspan="8" class="text-center">No users found</td>
										</tr>
										{% endfor %}
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
</div>

{% endblock content %}