
{% extends "backend/themes/base.html" %}
{% load static %}

{% block content %}
		<!-- PAGE WRAPPER -->
		<div class="ec-page-wrapper">

			<!-- Header -->
			<header class="ec-main-header" id="header">
				<nav class="navbar navbar-static-top navbar-expand-lg">
					<!-- Sidebar toggle button -->
					<button id="sidebar-toggler" class="sidebar-toggle"></button>
					<!-- search form -->
					<div class="search-form d-lg-inline-block">
						<div class="input-group">
							<input type="text" name="query" id="search-input" class="form-control"
								placeholder="search.." autofocus autocomplete="off" />
							<button type="button" name="search" id="search-btn" class="btn btn-flat">
								<i class="mdi mdi-magnify"></i>
							</button>
						</div>
						<div id="search-results-container">
							<ul id="search-results"></ul>
						</div>
					</div>

					<!-- navbar right -->
					<div class="navbar-right">
						<ul class="nav navbar-nav">
							<!-- User Account -->
							<li class="dropdown user-menu">
								<button class="dropdown-toggle nav-link ec-drop" data-bs-toggle="dropdown"
									aria-expanded="false">
									<img src="assets/img/user/user.png" class="user-image" alt="User Image" />
								</button>
								<ul class="dropdown-menu dropdown-menu-right ec-dropdown-menu">
									<!-- User image -->
									<li class="dropdown-header">
										<img src="assets/img/user/user.png" class="img-circle" alt="User Image" />
										<div class="d-inline-block">
											John Deo <small class="pt-1">john.example@gmail.com</small>
										</div>
									</li>
									<li>
										<a href="user-profile.html">
											<i class="mdi mdi-account"></i> My Profile
										</a>
									</li>
									
									<li class="dropdown-footer">
										<a href="index.html"> <i class="mdi mdi-logout"></i> Log Out </a>
									</li>
								</ul>
							</li>
							
						</ul>
					</div>
				</nav>
			</header>

			<!-- CONTENT WRAPPER -->
			<div class="ec-content-wrapper">
				<div class="content">
					<div class="breadcrumb-wrapper breadcrumb-wrapper-2 breadcrumb-contacts">
							<h1>Main Category</h1>
							<p class="breadcrumbs"><span><a href="index.html">Home</a></span>
								<span><i class="mdi mdi-chevron-right"></i></span>Main Category</p>
					</div>
					<div class="row">
						<div class="col-xl-4 col-lg-12">
							<div class="ec-cat-list card card-default mb-24px">
								<div class="card-body">
									<div class="ec-cat-form">
										<h4>Add New Category</h4>

										<form method="POST">
											{% csrf_token %}

											<div class="form-group row">
												<label class="col-12 col-form-label">Name</label>
												<div class="col-12">
													<input name="name" value="{{ form.instance.name }}" class="form-control slug-title" required>
												</div>
											</div>

											<div class="form-group row">
												<label class="col-12 col-form-label">Slug</label>
												<div class="col-12">
													<input name="slug" value="{{ form.instance.slug }}" class="form-control set-slug">
													<small>The slug must be lowercase and use hyphens only</small>
												</div>
											</div>

											<div class="form-group row">
												<label class="col-12 col-form-label">Short Description</label>
												<div class="col-12">
													<textarea name="short_description" rows="2" class="form-control">{{ form.instance.short_description }}</textarea>
												</div>
											</div>

											<div class="form-group row">
												<label class="col-12 col-form-label">Full Description</label>
												<div class="col-12">
													<textarea name="full_description" rows="4" class="form-control">{{ form.instance.full_description }}</textarea>
												</div>
											</div>

											<div class="form-group row">
												<label class="col-12 col-form-label">Product Tags</label>
												<div class="col-12">
													<input name="tags" value="{{ form.instance.tags }}" class="form-control" data-role="tagsinput">
												</div>
											</div>

											<div class="form-group row">
												<label class="col-12 col-form-label">Status</label>
												<div class="col-12">
													<select name="status" class="form-control">
														<option value="active" {% if form.instance.status == "active" %}selected{% endif %}>Active</option>
														<option value="inactive" {% if form.instance.status == "inactive" %}selected{% endif %}>Inactive</option>
													</select>
												</div>
											</div>

											<div class="form-group row">
												<label class="col-12 col-form-label">Trending</label>
												<div class="col-12">
													<select name="trending" class="form-control">
														<option value="top" {% if form.instance.trending == "top" %}selected{% endif %}>Top</option>
														<option value="medium" {% if form.instance.trending == "medium" %}selected{% endif %}>Medium</option>
														<option value="low" {% if form.instance.trending == "low" %}selected{% endif %}>Low</option>
													</select>
												</div>
											</div>

											{% if editing %}
												<button class="btn btn-warning mt-3">Update</button>
												<a href="{% url 'category_list' %}" class="btn btn-secondary mt-3">Cancel</a>
											{% else %}
												<button class="btn btn-primary mt-3">Submit</button>
											{% endif %}
										</form>
									</div>
								</div>
							</div>
						</div>
						<div class="col-xl-8 col-lg-12">
							<div class="ec-cat-list card card-default">
								<div class="card-body">
									<div class="table-responsive">
										<table id="responsive-data-table" class="table">
											<thead>
												<tr>
													{% comment %} <th>Thumb</th> {% endcomment %}
													<th>Name</th>
													<th>NO.of Subcategory</th>
													<th>Status</th>
													<th>Trending</th>
													<th>Action</th>
												</tr>
											</thead>

											<tbody>
												{% for cat in categories %}
												<tr>
													{% comment %} <td>
														<img class="cat-thumb" src="{% static 'assets/img/category/default-thumb.png' %}" alt="main category Image">
													</td> {% endcomment %}
													<td>{{ cat.name }}</td>

													<td>
														{% with cat.subcategories.count as count %}
															<span class="ec-sub-cat-tag-count">{{ count }}</span>
														{% endwith %}

														{% comment %} <span class="ec-sub-cat-list">
															{% for sub in cat.subcategories.all %}
																<span class="ec-sub-cat-tag">{{ sub.name }}</span>
															{% endfor %}
														</span> {% endcomment %}
													</td>

													<td>
														{% if cat.status == 'active' %}
															<span class="badge bg-success">ACTIVE</span>
														{% else %}
															<span class="badge bg-danger">INACTIVE</span>
														{% endif %}
													</td>

													<td>
														{% if cat.trending == 'top' %}
															<span class="badge badge-success">TOP</span>
														{% elif cat.trending == 'medium' %}
															<span class="badge bg-primary">MEDIUM</span>
														{% else %}
															<span class="badge bg-danger">LOW</span>
														{% endif %}
													</td>

													<td>
														<div class="btn-group">
															<a href="{% url 'category_edit' cat.id %}" class="dropdown-item">Edit</a>
															<a href="{% url 'category_delete' cat.id %}" class="dropdown-item text-danger"
															onclick="return confirm('Delete this category?');">Delete</a>
														</div>
													</td>

												</tr>
												{% endfor %}
												</tbody>

										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div> <!-- End Content -->
			</div> <!-- End Content Wrapper -->

				{% endblock content %}